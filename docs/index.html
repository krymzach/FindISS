
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find ISS</title>
    <style>
        body { margin: 0; }
        .zoom_buttons {
            position: absolute;
            right: 20px;
            bottom: 20px;
            width: 40px;
            height: 81px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            border: 1px solid white;
            display: flex;
            flex-direction: column;
        }
        .zoom_in_button {
            width: 40px;
            height: 41px;
            text-align: center;
            color: white;
            border-bottom: 1px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            user-select: none;
            -moz-user-select: none;
            -webkit-user-select: none;
        }
        .zoom_out_button {
            width: 40px;
            height: 40px;
            text-align: center;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            user-select: none;
            -moz-user-select: none;
            -webkit-user-select: none;
        }
        .focus_button {
            position: absolute;
            right: 20px;
            top: 20px;
            border-radius: 50%;
            border: 1px solid white;
            width: 40px;
            height: 40px;
            text-align: center;
            color: white;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 30px;
            user-select: none;
            -moz-user-select: none;
            -webkit-user-select: none;
            padding-bottom: 2px;
        }
        .focus_button:hover {
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
        }
    </style>
    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@v0.156.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@v0.156.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <div class="zoom_buttons">
        <div class="zoom_in_button" id="zoom_in_button">+</div>
        <div class="zoom_out_button" id="zoom_out_button">-</div>
    </div>
    <div class="focus_button" id="focus_button">‚åñ</div>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { FBXLoader } from 'three/addons/loaders/FBXLoader.js';

        function convertLatLongToPosition(latitude, longitude) {
            // Starting Lat, Long is -90, 0
        }

        function getISSInfo() {
            let ISSInfo;
            fetch('https://api.wheretheiss.at/v1/satellites/25544', {
                method: "GET"
            }).then((response) => response.json()).then((json) => {
                ISSInfo = json;
                console.log(ISSInfo);
                return ISSInfo;
            });
        }

        function zoomIn() {
            if(camera.zoom <= 19.75) {
                if(camera.zoom < 3) {
                    camera.zoom += 0.25;
                } else if(camera.zoom < 6) {
                    camera.zoom += 0.5;
                } else if(camera.zoom < 10) {
                    camera.zoom += 0.75;
                } else {
                    camera.zoom += 1;
                }
                camera.updateProjectionMatrix();
            }
        }

        function zoomOut() {
            if(camera.zoom >= 0.75) {
                if(camera.zoom < 3) {
                    camera.zoom -= 0.25;
                } else if(camera.zoom < 6) {
                    camera.zoom -= 0.5;
                } else if(camera.zoom < 10) {
                    camera.zoom -= 0.75;
                } else {
                    camera.zoom -= 1;
                }
                camera.updateProjectionMatrix();
            }
        }

        function zoomInMouseEnter() {
            if(camera.zoom < 20) {
                zoomInButton.style.background = "rgba(255, 255, 255, 0.2)";
                zoomInButton.style.cursor = "pointer";
            }
        }

        function zoomOutMouseEnter() {
            if(camera.zoom > 0.5) {
                zoomOutButton.style.background = "rgba(255, 255, 255, 0.2)";
                zoomOutButton.style.cursor = "pointer";
            }
        }

        function zoomInMouseLeave() {
            zoomInButton.style.background = "rgba(255, 255, 255, 0)";
            zoomInButton.style.cursor = "default";
        }

        function zoomOutMouseLeave() {
            zoomOutButton.style.background = "rgba(255, 255, 255, 0)";
            zoomOutButton.style.cursor = "default";
        }

        const zoomInButton = document.getElementById("zoom_in_button");
        const zoomOutButton = document.getElementById("zoom_out_button");

        zoomInButton.addEventListener("click", zoomIn, false);
        zoomOutButton.addEventListener("click", zoomOut, false);

        zoomInButton.addEventListener("mouseenter", zoomInMouseEnter, false);
        zoomOutButton.addEventListener("mouseenter", zoomOutMouseEnter, false);
        zoomInButton.addEventListener("mouseleave", zoomInMouseLeave, false);
        zoomOutButton.addEventListener("mouseleave", zoomOutMouseLeave, false);

        const scene = new THREE.Scene();
        const backgroundTexture = new THREE.TextureLoader().load("./assets/stars.jpg");
        backgroundTexture.colorSpace = THREE.SRGBColorSpace;
        scene.background = backgroundTexture
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const axesHelper = new THREE.AxesHelper( 5 );
        scene.add( axesHelper );

        const light = new THREE.PointLight(0xffffff, 1000)
        light.position.set(6.4, 12.2, 6.0)
        scene.add(light)

        const ambientLight = new THREE.AmbientLight()
        scene.add(ambientLight)
        camera.position.x = 0;
        camera.position.y = 0;
        camera.position.z = -5;
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableZoom = false;
        controls.enablePan = false;
        controls.maxDistance = 6
        controls.minDistance = 4
        const loader = new GLTFLoader();

        loader.load(
            './assets/Earth_1_12756.glb', // Radius = 3
            function (object) {
                object.scene.scale.set(.006, .006, .006);
                scene.add(object.scene);
            }
        )

        loader.load(
            './assets/ISS_stationary.glb',
            function (object) {
                object.scene.scale.set(0.001, 0.001, 0.001);
                object.scene.position.set(0, 0, -3.5);
                scene.add(object.scene);
            }
        )

        const animate = function () {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        };
        animate();
    </script>
</body>
</html>